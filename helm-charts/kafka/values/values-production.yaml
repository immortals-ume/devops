# Kafka Production Environment Configuration

nameOverride: ""
fullnameOverride: "kafka"

kafka:
  replicas: 5
  resources:
    requests:
      cpu: 2
      memory: 4Gi
    limits:
      cpu: 4
      memory: 8Gi
  storage:
    size: 100Gi
    storageClass: "fast-ssd"
  config:
    offsetsTopicReplicationFactor: 3
    defaultReplicationFactor: 3
    minInsyncReplicas: 2
    numPartitions: 6
    logRetentionHours: 168
  exporter:
    enabled: true

zookeeper:
  enabled: true
  replicas: 5
  resources:
    requests:
      cpu: 1
      memory: 2Gi
    limits:
      cpu: 2
      memory: 4Gi
  storage:
    size: 20Gi
    storageClass: "standard"

kafdrop:
  enabled: true
  replicas: 2
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1
      memory: 1Gi
  ingress:
    enabled: true
    className: nginx
    host: kafdrop.example.com

monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 15s

networkPolicy:
  enabled: true
  allowedNamespaces:
    - myapp
    - observability

podDisruptionBudget:
  enabled: true
  maxUnavailable: 1

affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app
              operator: In
              values:
                - kafka
                - zookeeper
        topologyKey: "kubernetes.io/hostname"
